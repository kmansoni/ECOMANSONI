# UI Spec — Error & Degradation Patterns (D0.000 Compatible)

Дата: 2026-02-22

Цель: единый паттерн UX для ошибок/деградации/ограничений так, чтобы:
- пользователь не пугался,
- всегда был next-action,
- стиль строго соответствовал D0.000.

---

## 1) Общие правила

- Никаких системных alert’ов.
- Любая проблема выражается в одном из типов surface:
  - inline state (внутри экрана)
  - toast (только для кратких успехов/мелких ошибок)
  - modal/sheet (если нужно действие/подтверждение)

---

## 2) Error taxonomy mapping

Каждый error_code относится к категории:
- `validation` (пользователь может исправить сейчас)
- `retryable_network`
- `retryable_server`
- `permission`
- `policy_blocked`
- `unknown`

Каждая категория имеет дефолтный:
- заголовок
- текст
- primary action
- secondary action

---

## 3) Degradation states

### 3.1 Feed fallback
- UI не должен сообщать “алгоритм сломан”.
- Допустимо: нейтральный hint “Показываем подборку по новизне”.

### 3.2 Create disabled
- Нейтральный текст: “Публикация временно недоступна. Попробуйте позже.”
- Action: “Повторить” / “Закрыть”.

### 3.3 Safety restriction
- Нейтральный текст, без деталей антиабьюза.
- Action: “Обжаловать” (если применимо).

---

## 4) Loading & long-running

- Любая операция > 2–3 секунд:
  - показывает прогресс/статус
  - имеет cancel (если безопасно)
- Никаких бесконечных спиннеров без текста.

---

## 5) Acceptance checklist

- Любой экран использует один из типов surface.
- Любая ошибка имеет next-action.
- Тексты нейтральны.
- Визуально соответствует D0.000.
